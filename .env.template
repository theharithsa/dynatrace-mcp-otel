# ========================
# Dynatrace MCP Server - .env Template
# ========================

# ========================
# Core Dynatrace Configuration
# ========================

# Dynatrace Environment URL (API v2 endpoint for entities, problems, logs, etc.)
DT_ENVIRONMENT=https://<your-env-id>.live.dynatrace.com

# Dynatrace Platform API URL (for OAuth capabilities, documents, settings, etc.)
# If not set, this will be auto-derived from DT_ENVIRONMENT (live -> apps)
DT_PLATFORM_ENVIRONMENT=https://<your-env-id>.apps.dynatrace.com

# ========================
# Authentication (Choose ONE method)
# ========================

# Method 1: Platform Token (RECOMMENDED - Simpler setup)
# Get this from: Settings > Access tokens > Generate token
# Required scopes: Read/Write entities, Read problems/logs/metrics/events, 
# Read security problems, Read/Write settings/documents, Execute Davis CoPilot
DT_PLATFORM_TOKEN=dt0c01.<your-platform-token>

# API Token (For entity write operations on live.dynatrace.com)
# Required scopes: entities:write
DT_API_TOKEN=dt0c01.<your-api-token>

# Method 2: OAuth Client Credentials (Alternative)
OAUTH_CLIENT_ID=dt0s02.<your-client-id>
OAUTH_CLIENT_SECRET=dt0s02.<your-client-id>.<your-client-secret>
OAUTH_TOKEN_URL=https://sso.dynatrace.com/sso/oauth2/token

# ========================
# OpenTelemetry Configuration (Optional)
# ========================

# OTEL tracing endpoint for observability of the MCP server itself
OTEL_EXPORTER_OTLP_ENDPOINT=https://<your-env-id>.live.dynatrace.com/api/v2/otlp/v1/traces
OTEL_RESOURCE_ATTRIBUTES=service.name=dynatrace-mcp-server,service.version=2.3.0

# ========================
# Additional Configuration (Optional)
# ========================

# Slack Connection ID (from Dynatrace Slack App configuration)
SLACK_CONNECTION_ID=<your-slack-connection-id>

# Maximum GB budget for Grail queries per session (default: 1000 GB, -1 for unlimited)
DT_GRAIL_QUERY_BUDGET_GB=1000

# Document sharing recipients (comma separated user/group IDs)
DT_SHARE_RECIPIENTS=<recipient-id-1>,<recipient-id-2>
DT_SHARE_TYPE=group

# ========================
# OpenKit Telemetry Configuration (Optional)
# ========================

# Disable telemetry collection entirely (set to 'true' to disable)
DT_MCP_DISABLE_TELEMETRY=false

# Custom telemetry endpoint (defaults to Dynatrace production self-monitoring)
# Set this to your own tenant: https://YOUR_TENANT.apps.dynatrace.com/mbeacon
DT_MCP_TELEMETRY_ENDPOINT_URL=https://<your-tenant-for-telemetry>.apps.dynatrace.com/mbeacon

# Custom application ID for telemetry (get from Settings > Integration > Platform as a Service)
DT_MCP_TELEMETRY_APPLICATION_ID=<your-openkit-application-id>

# Custom device ID for consistent identification (optional, auto-generated if not set)
DT_MCP_TELEMETRY_DEVICE_ID=<your-custom-device-id>

# ========================
# Legacy Variables (Deprecated - use DT_* variables above)
# ========================

# These are kept for backward compatibility but will be removed in future versions
# Use DT_ENVIRONMENT and DT_PLATFORM_TOKEN instead
# DYNATRACE_ENVIRONMENT_URL=https://your-tenant.live.dynatrace.com
# DYNATRACE_API_TOKEN=your-api-token-here
# DYNATRACE_LOG_INGEST_URL=https://<your-env-id>.live.dynatrace.com/api/v2/logs/ingest

