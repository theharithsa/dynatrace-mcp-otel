<!-- Custom footer content -->
<footer class="site-footer h-card">
  <data class="u-url" href="{{ "/" | relative_url }}"></data>

  <div class="wrapper">
    <div class="footer-content">
      <div class="footer-section">
        <h3>Dynatrace MCP Server</h3>
        <p>{{ site.description }}</p>
        <div class="social-links">
          <a href="{{ site.author.email | prepend: 'mailto:' }}" title="Email">
            <i class="fas fa-envelope"></i>
          </a>
          <a href="https://github.com/{{ site.github_username }}" title="GitHub">
            <i class="fab fa-github"></i>
          </a>
          <a href="https://twitter.com/{{ site.twitter_username }}" title="Twitter">
            <i class="fab fa-twitter"></i>
          </a>
          <a href="https://linkedin.com/in/{{ site.linkedin_username }}" title="LinkedIn">
            <i class="fab fa-linkedin"></i>
          </a>
        </div>
      </div>
      
      <div class="footer-section">
        <h3>Quick Links</h3>
        <ul class="footer-links">
          <li><a href="{{ '/docs' | relative_url }}">Documentation</a></li>
          <li><a href="{{ '/docs/getting-started' | relative_url }}">Getting Started</a></li>
          <li><a href="{{ '/docs/mcp-tools' | relative_url }}">MCP Tools</a></li>
          <li><a href="{{ '/docs/about' | relative_url }}">About</a></li>
        </ul>
      </div>
      
      <div class="footer-section">
        <h3>Resources</h3>
        <ul class="footer-links">
          <li><a href="https://github.com/theharithsa/dynatrace-mcp-otel/issues">Report Issues</a></li>
          <li><a href="https://github.com/theharithsa/dynatrace-mcp-otel/blob/main/CONTRIBUTING.md">Contributing</a></li>
          <li><a href="https://github.com/theharithsa/dynatrace-mcp-otel/blob/main/LICENSE">License</a></li>
          <li><a href="https://www.dynatrace.com">Dynatrace</a></li>
        </ul>
      </div>
    </div>
    
    <div class="footer-bottom">
      <p>&copy; {{ site.time | date: "%Y" }} {{ site.author.name }}. All rights reserved.</p>
      <p>Powered by <a href="https://jekyllrb.com">Jekyll</a> & <a href="https://github.com/jekyll/minima">Minima</a></p>
    </div>
  </div>
</footer>

<!-- Custom JavaScript -->
<script>
// Enhanced search functionality
document.addEventListener('DOMContentLoaded', function() {
  // Add search functionality if search input exists
  const searchInput = document.querySelector('#search-input');
  const searchResults = document.querySelector('#search-results');
  
  if (searchInput && searchResults) {
    let searchData = [];
    
    // Load search data
    fetch('{{ "/assets/js/search-data.json" | relative_url }}')
      .then(response => response.json())
      .then(data => {
        searchData = data;
      })
      .catch(error => console.log('Search data not available'));
    
    // Search function
    function performSearch(query) {
      if (query.length < 2) {
        searchResults.innerHTML = '';
        return;
      }
      
      const results = searchData.filter(item => 
        item.title.toLowerCase().includes(query.toLowerCase()) ||
        item.content.toLowerCase().includes(query.toLowerCase())
      ).slice(0, 10);
      
      if (results.length > 0) {
        searchResults.innerHTML = results.map(result => `
          <div class="search-result">
            <h4><a href="${result.url}">${result.title}</a></h4>
            <p>${result.excerpt}</p>
          </div>
        `).join('');
      } else {
        searchResults.innerHTML = '<p class="no-results">No results found.</p>';
      }
    }
    
    // Add event listeners
    searchInput.addEventListener('input', (e) => {
      performSearch(e.target.value);
    });
    
    searchInput.addEventListener('focus', () => {
      searchResults.style.display = 'block';
    });
    
    document.addEventListener('click', (e) => {
      if (!searchInput.contains(e.target) && !searchResults.contains(e.target)) {
        searchResults.style.display = 'none';
      }
    });
  }
  
  // Add smooth scrolling for anchor links
  document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
      e.preventDefault();
      const target = document.querySelector(this.getAttribute('href'));
      if (target) {
        target.scrollIntoView({
          behavior: 'smooth',
          block: 'start'
        });
      }
    });
  });
  
  // Add copy button to code blocks
  document.querySelectorAll('pre code').forEach(block => {
    const button = document.createElement('button');
    button.className = 'copy-button';
    button.innerHTML = '<i class="fas fa-copy"></i>';
    button.title = 'Copy code';
    
    button.addEventListener('click', () => {
      navigator.clipboard.writeText(block.textContent).then(() => {
        button.innerHTML = '<i class="fas fa-check"></i>';
        setTimeout(() => {
          button.innerHTML = '<i class="fas fa-copy"></i>';
        }, 2000);
      });
    });
    
    block.parentElement.appendChild(button);
  });
  
  // Mobile menu toggle
  const menuButton = document.querySelector('.menu-button');
  const navigation = document.querySelector('.site-nav');
  
  if (menuButton && navigation) {
    menuButton.addEventListener('click', () => {
      navigation.classList.toggle('open');
      menuButton.classList.toggle('active');
    });
  }
});

// Theme toggle functionality
function toggleTheme() {
  const currentTheme = localStorage.getItem('theme') || 'light';
  const newTheme = currentTheme === 'light' ? 'dark' : 'light';
  
  document.documentElement.setAttribute('data-theme', newTheme);
  localStorage.setItem('theme', newTheme);
  
  // Update toggle button icon
  const themeToggle = document.querySelector('.theme-toggle');
  if (themeToggle) {
    themeToggle.innerHTML = newTheme === 'light' ? 
      '<i class="fas fa-moon"></i>' : '<i class="fas fa-sun"></i>';
  }
}

// Initialize theme
document.addEventListener('DOMContentLoaded', function() {
  const savedTheme = localStorage.getItem('theme') || 'light';
  document.documentElement.setAttribute('data-theme', savedTheme);
  
  // Update theme toggle button
  const themeToggle = document.querySelector('.theme-toggle');
  if (themeToggle) {
    themeToggle.innerHTML = savedTheme === 'light' ? 
      '<i class="fas fa-moon"></i>' : '<i class="fas fa-sun"></i>';
    themeToggle.addEventListener('click', toggleTheme);
  }
});
</script>

<!-- Analytics -->
{% if site.google_analytics %}
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id={{ site.google_analytics }}"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', '{{ site.google_analytics }}');
</script>
{% endif %}
</footer>
